<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Practice for the Spanish DGT driving theory exam with interactive tests in English, Spanish, and Russian." />
    <meta name="theme-color" content="#667eea" />
    <title>DGT Exam Practice Platform</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@500;600&display=swap" rel="stylesheet" />
    
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <div class="container">
      <!-- ============================================================
           HOME SCREEN
           ============================================================ -->
      <div id="homeScreen" class="screen active" role="main" id="main-content">
        <div class="home-content">
          <!-- App Header with Language & Theme -->
          <div class="app-header">
            <div class="logo-small">
              <span class="logo-icon">üöó</span>
            </div>
            <div class="header-controls">
              <!-- App Language Selector -->
              <div class="app-lang-selector" id="appLangSelector">
                <button class="app-lang-btn" id="appLangBtn" aria-label="Change app language">
                  <span class="app-lang-flag" id="appLangFlag">üá™üá∏</span>
                  <span class="app-lang-code" id="appLangCode">ES</span>
                  <span class="app-lang-arrow">‚ñº</span>
                </button>
                <div class="app-lang-dropdown hidden" id="appLangDropdown">
                  <button class="app-lang-option" data-lang="es">
                    <span>üá™üá∏</span> Espa√±ol
                  </button>
                  <button class="app-lang-option" data-lang="en">
                    <span>üá¨üáß</span> English
                  </button>
                </div>
              </div>
              <!-- Theme Toggle -->
              <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                <span class="icon" id="themeIcon">üåô</span>
              </button>
            </div>
          </div>
          
          <!-- Logo -->
          <div class="logo">
            <h1 data-i18n="appTitle">DGT Exam Practice</h1>
            <p class="subtitle" data-i18n="appSubtitle">Master the Spanish Driving Theory Test</p>
          </div>

          <!-- Language Selection for Exam -->
          <div class="language-selection">
            <h2 data-i18n="selectLanguage">Select Exam Language</h2>
            <div class="language-buttons" role="group" aria-label="Language selection">
              <button class="lang-btn" data-lang="E" aria-pressed="false">
                <span class="flag" aria-hidden="true">üá¨üáß</span>
                <span>English</span>
              </button>
              <button class="lang-btn" data-lang="S" aria-pressed="false">
                <span class="flag" aria-hidden="true">üá™üá∏</span>
                <span>Espa√±ol</span>
              </button>
              <button class="lang-btn" data-lang="R" aria-pressed="false">
                <span class="flag" aria-hidden="true">üá∑üá∫</span>
                <span>–†—É—Å—Å–∫–∏–π</span>
              </button>
            </div>
          </div>

          <!-- Info Section -->
          <div class="info-section">
            <h3 data-i18n="howItWorks">How it works</h3>
            <ul>
              <li><span aria-hidden="true">üìã</span> <span data-i18n="info1">30 random questions per exam</span></li>
              <li><span aria-hidden="true">‚è±Ô∏è</span> <span data-i18n="info2">30 minutes to complete (like the real test)</span></li>
              <li><span aria-hidden="true">‚úÖ</span> <span data-i18n="info3">Pass with 3 or fewer incorrect answers</span></li>
              <li><span aria-hidden="true">üìö</span> <span data-i18n="info4">Review detailed explanations after each exam</span></li>
            </ul>
          </div>

          <!-- Start Button -->
          <button id="startBtn" class="btn btn-primary btn-large" disabled aria-describedby="start-hint">
            <span aria-hidden="true">üöÄ</span>
            <span data-i18n="startExam">Start Practice Exam</span>
          </button>
          <p id="start-hint" class="sr-only" data-i18n="startHint">Select a language first to enable this button</p>

          <!-- Statistics Section -->
          <div class="stats-section">
            <h3 data-i18n="yourStats">Your Statistics</h3>
            <div class="stats-grid">
              <div class="stat-box">
                <span class="stat-icon" aria-hidden="true">üìä</span>
                <span class="stat-label" data-i18n="totalExams">Total Exams</span>
                <span class="stat-value" id="totalExams">0</span>
              </div>
              <div class="stat-box">
                <span class="stat-icon" aria-hidden="true">üèÜ</span>
                <span class="stat-label" data-i18n="passed">Passed</span>
                <span class="stat-value passed" id="passedExams">0</span>
              </div>
              <div class="stat-box">
                <span class="stat-icon" aria-hidden="true">üìâ</span>
                <span class="stat-label" data-i18n="failed">Failed</span>
                <span class="stat-value failed" id="failedExams">0</span>
              </div>
            </div>
          </div>

          <!-- Exam History Section -->
          <div class="history-section" id="historySection">
            <div class="history-header">
              <h3><span aria-hidden="true">üìú</span> <span data-i18n="recentExams">Recent Exams</span></h3>
              <button class="btn btn-ghost btn-small" id="clearHistoryBtn" aria-label="Clear all exam history" data-i18n="clearAll">
                Clear All
              </button>
            </div>
            <div class="history-list" id="historyList" role="list">
              <!-- History items will be dynamically inserted here -->
            </div>
            <div class="history-empty" id="historyEmpty">
              <div class="history-empty-icon" aria-hidden="true">üì≠</div>
              <p data-i18n="noHistory">No exam history yet. Start your first practice exam!</p>
            </div>
          </div>
        </div>
      </div>

      <!-- ============================================================
           EXAM SCREEN
           ============================================================ -->
      <div id="examScreen" class="screen" role="main" aria-label="Exam in progress">
        <div class="exam-header">
          <div class="exam-header-left">
            <!-- Timer -->
            <div class="exam-timer-container" id="timerContainer" aria-live="polite" aria-atomic="true">
              <span class="timer-icon" aria-hidden="true">‚è±Ô∏è</span>
              <span class="timer-value" id="timerValue">30:00</span>
            </div>
            
            <!-- Progress -->
            <div class="progress-section">
              <span class="question-counter">
                Question <span id="currentQuestion">1</span> of
                <span id="totalQuestions">30</span>
              </span>
              <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                <div class="progress-fill" id="progressFill"></div>
              </div>
              <!-- Question Navigation Dots -->
              <div class="question-dots" id="questionDots" role="navigation" aria-label="Question navigation">
                <!-- Dots will be generated dynamically -->
              </div>
            </div>
          </div>
          
          <button id="exitBtn" class="btn btn-secondary btn-small">
            Exit
          </button>
        </div>

        <div class="exam-content">
          <!-- Loading State -->
          <div class="loading-container" id="questionLoading" style="display: none;">
            <div class="loading-spinner"></div>
            <p class="loading-text">Loading question...</p>
          </div>
          
          <!-- Top: Question with optional image -->
          <div class="question-section" id="questionSection">
            <!-- Question Image (shown on left if exists) -->
            <div
              id="questionImageContainer"
              class="question-image-container"
              style="display: none"
            >
              <img
                id="questionImage"
                src=""
                alt="Traffic scenario for this question"
                class="question-image"
              />
            </div>

            <!-- Question Text -->
            <div class="question-text-wrapper">
              <div id="questionText" class="question-text"></div>
            </div>
          </div>

          <!-- Middle: Answer Options -->
          <div class="answers-section">
            <!-- Inline Error Message -->
            <div class="inline-error hidden" id="inlineError" role="alert">
              <span aria-hidden="true">‚ö†Ô∏è</span>
              <span id="inlineErrorText">Please select an answer before continuing.</span>
            </div>

            <!-- Answer Options -->
            <div id="answersContainer" class="answers-container" role="radiogroup" aria-label="Answer options">
              <!-- Answer buttons will be dynamically generated -->
            </div>
          </div>

          <!-- Bottom: Navigation & Status -->
          <div class="exam-footer">
            <div class="navigation-buttons">
              <button id="prevBtn" class="btn btn-secondary">
                <span aria-hidden="true">‚Üê</span> Previous
              </button>
              <button id="nextBtn" class="btn btn-primary">
                Next <span aria-hidden="true">‚Üí</span>
              </button>
            </div>
            <div class="question-status">
              <div class="answered-indicator">
                <span aria-hidden="true">‚úì</span>
                <span id="answeredCount">0</span>/<span id="totalForStatus">30</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ============================================================
           RESULTS SCREEN
           ============================================================ -->
      <div id="resultsScreen" class="screen" role="main" aria-label="Exam results">
        <div class="results-content">
          <div class="results-header">
            <h2 id="resultTitle"></h2>
            <div id="resultBadge" class="result-badge" aria-hidden="true"></div>
          </div>

          <div class="results-stats">
            <div class="result-stat">
              <span class="label">Total Questions</span>
              <span class="value">30</span>
            </div>
            <div class="result-stat">
              <span class="label">Correct</span>
              <span class="value correct" id="correctCount">0</span>
            </div>
            <div class="result-stat">
              <span class="label">Incorrect</span>
              <span class="value incorrect" id="incorrectCount">0</span>
            </div>
            <div class="result-stat">
              <span class="label">Score</span>
              <span class="value" id="scorePercentage">0%</span>
            </div>
          </div>

          <div class="result-stat" style="margin-bottom: var(--space-6);">
            <span class="label">Time Taken</span>
            <span class="value" id="timeTaken" style="font-size: var(--text-xl);">--:--</span>
          </div>

          <div class="results-message" id="resultMessage" role="alert"></div>

          <div class="review-button-group">
            <button id="reviewBtn" class="btn btn-primary">
              <span aria-hidden="true">üìñ</span> Review Answers
            </button>
            <button id="restartBtn" class="btn btn-secondary">
              <span aria-hidden="true">üîÑ</span> Start New Exam
            </button>
          </div>
        </div>
      </div>

      <!-- ============================================================
           REVIEW SCREEN
           ============================================================ -->
      <div id="reviewScreen" class="screen" role="main" aria-label="Review answers">
        <div class="review-header">
          <div class="progress-section">
            <span class="question-counter">
              Review: Question <span id="reviewCurrentQuestion">1</span> of
              <span id="reviewTotalQuestions">30</span>
            </span>
            <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
              <div class="progress-fill" id="reviewProgressFill"></div>
            </div>
            <!-- Review Question Navigation Dots -->
            <div class="question-dots" id="reviewQuestionDots" role="navigation" aria-label="Review question navigation">
              <!-- Dots will be generated dynamically -->
            </div>
          </div>
          <button id="backToResultsBtn" class="btn btn-secondary btn-small">
            <span aria-hidden="true">‚Üê</span> Back to Results
          </button>
        </div>

        <div class="review-content">
          <!-- Filter Buttons -->
          <div class="review-filter-buttons" role="group" aria-label="Filter questions">
            <button class="filter-btn active" data-filter="all">All (30)</button>
            <button class="filter-btn" data-filter="incorrect" id="filterIncorrect">Incorrect (0)</button>
            <button class="filter-btn" data-filter="correct" id="filterCorrect">Correct (0)</button>
          </div>

          <!-- Question Image -->
          <div
            id="reviewQuestionImageContainer"
            class="question-image-container"
            style="display: none"
          >
            <img
              id="reviewQuestionImage"
              src=""
              alt="Traffic scenario for this question"
              class="question-image"
            />
          </div>

          <!-- Question Text -->
          <div id="reviewQuestionText" class="question-text"></div>

          <!-- User's Answer -->
          <div id="reviewUserAnswerSection" class="review-answer-section">
            <h4>Your Answer</h4>
            <div id="reviewUserAnswer" class="review-answer-display"></div>
          </div>

          <!-- Correct Answer (if different) -->
          <div
            id="reviewCorrectAnswerSection"
            class="review-answer-section"
            style="display: none"
          >
            <h4>Correct Answer</h4>
            <div id="reviewCorrectAnswer" class="review-answer-display"></div>
          </div>

          <!-- Explanation -->
          <div id="reviewExplanationSection" class="review-explanation-full">
            <h4>Explanation</h4>
            <div id="reviewExplanation"></div>
          </div>

          <!-- Navigation Buttons -->
          <div class="navigation-buttons">
            <button id="reviewPrevBtn" class="btn btn-secondary">
              <span aria-hidden="true">‚Üê</span> Previous
            </button>
            <button id="reviewNextBtn" class="btn btn-primary">
              Next <span aria-hidden="true">‚Üí</span>
            </button>
          </div>
        </div>
      </div>

      <!-- ============================================================
           HISTORY DETAIL SCREEN
           ============================================================ -->
      <div id="historyDetailScreen" class="screen" role="main" aria-label="Exam history details">
        <div class="review-header">
          <div class="progress-section">
            <span class="question-counter">
              History: Question <span id="historyCurrentQuestion">1</span> of
              <span id="historyTotalQuestions">30</span>
            </span>
            <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
              <div class="progress-fill" id="historyProgressFill"></div>
            </div>
            <div class="question-dots" id="historyQuestionDots" role="navigation" aria-label="History question navigation">
              <!-- Dots will be generated dynamically -->
            </div>
          </div>
          <button id="backToHomeBtn" class="btn btn-secondary btn-small">
            <span aria-hidden="true">‚Üê</span> Back to Home
          </button>
        </div>

        <div class="review-content">
          <!-- History Exam Summary -->
          <div class="history-exam-summary" id="historyExamSummary" style="margin-bottom: var(--space-6); padding: var(--space-4); background: var(--bg-section); border-radius: var(--radius-lg);">
            <!-- Will be filled dynamically -->
          </div>

          <!-- Question Image -->
          <div
            id="historyQuestionImageContainer"
            class="question-image-container"
            style="display: none"
          >
            <img
              id="historyQuestionImage"
              src=""
              alt="Traffic scenario for this question"
              class="question-image"
            />
          </div>

          <!-- Question Text -->
          <div id="historyQuestionText" class="question-text"></div>

          <!-- User's Answer -->
          <div id="historyUserAnswerSection" class="review-answer-section">
            <h4>Answer Given</h4>
            <div id="historyUserAnswer" class="review-answer-display"></div>
          </div>

          <!-- Correct Answer (if different) -->
          <div
            id="historyCorrectAnswerSection"
            class="review-answer-section"
            style="display: none"
          >
            <h4>Correct Answer</h4>
            <div id="historyCorrectAnswer" class="review-answer-display"></div>
          </div>

          <!-- Explanation -->
          <div id="historyExplanationSection" class="review-explanation-full">
            <h4>Explanation</h4>
            <div id="historyExplanation"></div>
          </div>

          <!-- Navigation Buttons -->
          <div class="navigation-buttons">
            <button id="historyPrevBtn" class="btn btn-secondary">
              <span aria-hidden="true">‚Üê</span> Previous
            </button>
            <button id="historyNextBtn" class="btn btn-primary">
              Next <span aria-hidden="true">‚Üí</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- ============================================================
         TOAST CONTAINER
         ============================================================ -->
    <div class="toast-container" id="toastContainer" role="region" aria-label="Notifications" aria-live="polite">
      <!-- Toasts will be dynamically inserted here -->
    </div>

    <!-- ============================================================
         CONFIRMATION MODAL
         ============================================================ -->
    <div class="modal-backdrop hidden" id="modalBackdrop" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal">
        <div class="modal-header">
          <span class="modal-icon" id="modalIcon" aria-hidden="true">‚ö†Ô∏è</span>
          <h3 class="modal-title" id="modalTitle">Confirm Action</h3>
        </div>
        <div class="modal-body" id="modalBody">
          Are you sure you want to proceed?
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" id="modalCancelBtn">Cancel</button>
          <button class="btn btn-danger" id="modalConfirmBtn">Confirm</button>
        </div>
      </div>
    </div>

    <!-- ============================================================
         CONFETTI CONTAINER
         ============================================================ -->
    <div class="confetti-container" id="confettiContainer" aria-hidden="true">
      <!-- Confetti particles will be dynamically inserted here -->
    </div>

    <script src="script.js"></script>
  </body>
</html>
